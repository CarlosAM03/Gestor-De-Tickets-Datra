
---

# ðŸ” PLAN DE ROLLBACK â€” PRODUCCIÃ“N

## Gestor de Tickets DATRA

---

## ðŸŽ¯ PropÃ³sito

Este plan define el **procedimiento formal para revertir el sistema a un estado estable anterior** en caso de falla crÃ­tica en producciÃ³n, minimizando:

* Tiempo de indisponibilidad
* Riesgo de pÃ©rdida de datos
* Impacto operativo en usuarios

ðŸ“Œ *Rollback no es improvisaciÃ³n: es control.*

---

## ðŸš¨ Escenarios que activan rollback

El rollback se ejecuta **solo** ante fallas crÃ­ticas, por ejemplo:

* Backend no responde tras deploy
* Error de autenticaciÃ³n generalizada
* PÃ©rdida de acceso al dashboard
* Fallas de seguridad detectadas
* Crash del sistema sin hotfix viable

âŒ **No se usa rollback** para errores menores o ajustes visuales.

---

## ðŸ§± Componentes cubiertos

| Componente           | Estado                                   |
| -------------------- | ---------------------------------------- |
| Frontend             | Incluido                                 |
| Backend              | Incluido                                 |
| Base de datos        | Protegida (no revertida automÃ¡ticamente) |
| Variables de entorno | Conservadas                              |

ðŸ“Œ *La base de datos NO se revierte salvo desastre mayor.*

---

## ðŸ”™ Estrategia de rollback

### Principio clave

> **CÃ³digo vuelve atrÃ¡s, datos se conservan.**

Esto evita pÃ©rdida de informaciÃ³n operativa.

---

## ðŸ› ï¸ Procedimiento de Rollback

### 1ï¸âƒ£ IdentificaciÃ³n del Ãºltimo estado estable

* Commit etiquetado:

  ```bash
  release: v1.0.0 â€“ production deploy
  ```
* Verificado previamente en producciÃ³n

---

### 2ï¸âƒ£ Rollback Backend

**Proveedor:** Railway

Pasos:

1. Acceder al panel del servicio
2. Seleccionar Ãºltimo deploy estable
3. Revertir a versiÃ³n anterior
4. Verificar:

   * API responde
   * Login funcional
   * Logs sin errores crÃ­ticos

â±ï¸ **Tiempo estimado:** 5â€“10 minutos

---

### 3ï¸âƒ£ Rollback Frontend

**Proveedor:** Vercel

Pasos:

1. Acceder al proyecto
2. Seleccionar deploy anterior exitoso
3. Promover a producciÃ³n
4. Validar:

   * Carga del sitio
   * Login
   * NavegaciÃ³n principal

â±ï¸ **Tiempo estimado:** 2â€“5 minutos

---

### 4ï¸âƒ£ ValidaciÃ³n post-rollback

Smoke test mÃ­nimo:

* Login ADMIN
* Acceso al dashboard
* VisualizaciÃ³n de tickets
* Logout

ðŸ“Œ *Si esto falla, se activa protocolo de contingencia.*

---

## ðŸ—„ï¸ Base de Datos

### PolÃ­tica

* **No se hace rollback automÃ¡tico**
* Se conservan datos generados
* Migraciones ya aplicadas permanecen

### ExcepciÃ³n

Solo si ocurre:

* CorrupciÃ³n de datos
* Error estructural grave
* ViolaciÃ³n de integridad

Entonces:

1. Restaurar backup manual
2. Confirmar integridad
3. Notificar impacto

â±ï¸ **Tiempo estimado:** 20â€“30 minutos

---

## ðŸ” Variables de entorno

* No se modifican durante rollback
* Se revisan solo si la falla estÃ¡ relacionada con configuraciÃ³n

---

## ðŸ“¢ ComunicaciÃ³n

En caso de rollback:

* Notificar a stakeholders tÃ©cnicos
* Registrar:

  * Hora
  * Motivo
  * AcciÃ³n tomada
  * Resultado

ðŸ“Œ *Transparencia tÃ©cnica = confianza.*

---

## ðŸ§  Responsabilidad

* **Responsable tÃ©cnico:** Carlos Armenta
* DecisiÃ³n de rollback **no delegada**
* Toda acciÃ³n queda documentada

---

## âœ… Criterio de rollback exitoso

Rollback se considera exitoso cuando:

âœ” Sistema operativo
âœ” Usuarios pueden trabajar
âœ” No hay errores crÃ­ticos en logs
âœ” Datos intactos

---

## ðŸŽ¯ Mensaje clave (ejecutivo)

> *Tenemos la capacidad de volver a un estado estable en minutos sin perder informaciÃ³n crÃ­tica. El sistema estÃ¡ bajo control.*

---

# ðŸ§ª CHECKLIST DE VALIDACIÃ“N POST-ROLLBACK

## Gestor de Tickets DATRA

> **Objetivo:** Confirmar que el sistema quedÃ³ **operativo, estable y seguro** despuÃ©s de ejecutar un rollback.

---

## 1ï¸âƒ£ ValidaciÃ³n TÃ©cnica BÃ¡sica (OBLIGATORIA)

### Backend

* [ ] API responde (`/health` o `/`)
* [ ] Login responde sin error
* [ ] JWT generado correctamente
* [ ] Logs sin errores crÃ­ticos nuevos
* [ ] No hay reinicios continuos del servicio

---

### Frontend

* [ ] AplicaciÃ³n carga correctamente
* [ ] Assets estÃ¡ticos cargan sin 404
* [ ] No hay errores crÃ­ticos en consola
* [ ] NavegaciÃ³n principal funcional

---

## 2ï¸âƒ£ ValidaciÃ³n Funcional (Smoke Test)

### AutenticaciÃ³n

* [ ] Login ADMIN
* [ ] Token persistido
* [ ] Acceso al dashboard
* [ ] Logout funcional

---

### Tickets

* [ ] VisualizaciÃ³n de tickets
* [ ] CreaciÃ³n de ticket
* [ ] Cambio de estado
* [ ] Acceso a detalle de ticket

---

### Roles

* [ ] ADMIN â†’ acceso completo
* [ ] INGENIERO â†’ acceso global
* [ ] TECNICO â†’ acceso restringido

---

## 3ï¸âƒ£ Seguridad y Control

* [ ] Rutas protegidas (sin token â†’ bloqueado)
* [ ] Token invÃ¡lido â†’ logout forzado
* [ ] CORS sigue restringido al dominio autorizado
* [ ] HTTPS activo

---

## 4ï¸âƒ£ Base de Datos

* [ ] Datos previos conservados
* [ ] No pÃ©rdida de tickets
* [ ] Relaciones crÃ­ticas Ã­ntegras
* [ ] Escrituras nuevas posibles

---

## 5ï¸âƒ£ Cierre de ValidaciÃ³n

* [ ] Rollback documentado
* [ ] Hora y motivo registrados
* [ ] Sistema declarado estable

ðŸ“Œ *Si cualquier punto falla â†’ rollback incompleto.*

---

# ðŸ“„ ANEXO TÃ‰CNICO PARA AUDITORÃA

## Procedimiento de Rollback

---

## A. Objetivo del Proceso

Garantizar la **continuidad operativa del sistema** ante fallas crÃ­ticas, con:

* MÃ­nimo downtime
* Cero improvisaciÃ³n
* Trazabilidad completa

---

## B. Alcance

Incluye:

* Frontend (Vercel)
* Backend (Railway)
* ConfiguraciÃ³n de entorno

Excluye:

* Rollback automÃ¡tico de base de datos (solo bajo excepciÃ³n)

---

## C. Control de Versiones

* Commits versionados
* Tags de release (`v1.0.0`)
* Historial verificable

---

## D. Procedimiento Formal

1. IdentificaciÃ³n del Ãºltimo release estable
2. ReversiÃ³n de backend
3. ReversiÃ³n de frontend
4. ValidaciÃ³n tÃ©cnica y funcional
5. Registro del evento

---

## E. GestiÃ³n de Datos

* Backups existentes
* RestauraciÃ³n solo bajo desastre
* Datos operativos protegidos

---

## F. Responsabilidad

* DecisiÃ³n centralizada
* Responsable tÃ©cnico asignado
* Registro obligatorio del evento

---

## G. Evidencia Requerida

* Logs del sistema
* Capturas del estado post-rollback
* Checklist firmado

ðŸ“Œ *Este proceso es auditable, repetible y defendible.*

---

# ðŸŽ¤ EXPLICACION PRACTICA

> â€œEn producciÃ³n, los errores no se improvisan.
>
> Nuestro sistema tiene versiones controladas.
> Si algo crÃ­tico falla, revertimos en minutos a una versiÃ³n estable sin perder datos.
>
> El frontend y backend vuelven atrÃ¡s, la base de datos se conserva y validamos que todo funcione.
>
> Esto nos permite operar con seguridad, continuidad y cero improvisaciÃ³n.â€

---

> *No evitamos errores. Evitamos que se conviertan en crisis.*

---
